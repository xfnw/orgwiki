#+TITLE: *lix ur installer*

ive been happily using lix HEAD on my nixos boxes, so why not build
the installer myself too for my non-nixos boxes? well it turns out you
can

* make a lix tarball
#+begin_example
git clone https://git.lix.systems/lix-project/lix
cd lix
nix build .#hydraJobs.binaryTarball.x86_64-linux
#+end_example

* build the installer
its a nice lil static binary
#+begin_example
git clone https://git.lix.systems/lix-project/lix-installer
cd lix-installer
nix build --override-input lix ./path/to/where/you/put/lix
#+end_example

#+begin_chat hi
the installer has an "associated supported nix version", so make sure
you override the lix input to the same revision of lix you made the
tarball of
#+end_chat

* run the installer
with ~--nix-package-url~ pointing to the tarball
#+begin_example
sudo lix-installer install linux --nix-package-url https://example.com/your-lix-tarball.tar.xz
#+end_example

#+begin_chat vulpine/eepy
the installer really did not like the remnants of my old cppnix
installation and gave some rather odd errors, but it worked fine after
letting it delete the old ~/nix~
#+end_chat

#+begin_comment
ERROR 
   0: Install failure
   1: Error executing action
   2: Action `provision_nix` errored
   3: Action `fetch_and_unpack_nix` errored
   4: Unarchiving error
   5: trying to unpack outside of destination path: /nix/temp-install-dir
   6: Invalid argument

Location:
   src/cli/subcommand/install.rs:300

Backtrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.
Run with RUST_BACKTRACE=full to include source snippets.

Consider reporting this error using this URL: https://git.lix.systems/lix-project/lix-installer/issues/new?title=%3Cautogenerated-issue%3E&body=%23%23+Error%0A%60%60%60%0AError%3A+%0A+++0%3A+Install+failure%0A+++1%3A+Error+executing+action%0A+++2%3A+Action+%60provision_nix%60+errored%0A+++3%3A+Action+%60fetch_and_unpack_nix%60+errored%0A+++4%3A+Unarchiving+error%0A+++5%3A+trying+to+unpack+outside+of+destination+path%3A+%2Fnix%2Ftemp-install-dir%0A+++6%3A+Invalid+argument%0A%60%60%60%0A%0A%23%23+Metadata%0A%7Ckey%7Cvalue%7C%0A%7C--%7C--%7C%0A%7C**version**%7C0.17.1%7C%0A%7C**os**%7Clinux%7C%0A%7C**arch**%7Cx86_64%7C%0A
#+end_comment

#+begin_comment
 INFO Step: Create directory `/nix`
 INFO Step: Provision Nix
 INFO Step: Create build users (UID 30001-30032) and group (GID 30000)
 INFO Step: Configure Nix
ERROR 
   0: Install failure
   1: Error executing action
   2: Action `configure_nix` errored
   3: Action `setup_default_profile` errored
   4: Failed to execute command with status 1 `HOME="/root" "/nix/store/kgiyc1qdmffjj6dyjfzk3xlxnvnlfrab-lix-2.94.0pre20251013-dev_556012e/bin/nix-store" "--load-db"`, stdout: 
      stderr: error: you don't have sufficient rights to use this command

   4: 

Location:
   src/cli/subcommand/install.rs:300

Backtrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.
Run with RUST_BACKTRACE=full to include source snippets.

Consider reporting this error using this URL: https://git.lix.systems/lix-project/lix-installer/issues/new?title=%3Cautogenerated-issue%3E&body=%23%23+Error%0A%60%60%60%0AError%3A+%0A+++0%3A+Install+failure%0A+++1%3A+Error+executing+action%0A+++2%3A+Action+%60configure_nix%60+errored%0A+++3%3A+Action+%60setup_default_profile%60+errored%0A+++4%3A+Failed+to+execute+command+with+status+1+%60HOME%3D%22%2Froot%22+%22%2Fnix%2Fstore%2Fkgiyc1qdmffjj6dyjfzk3xlxnvnlfrab-lix-2.94.0pre20251013-dev_556012e%2Fbin%2Fnix-store%22+%22--load-db%22%60%2C+stdout%3A+%0A++++++stderr%3A+error%3A+you+don%27t+have+sufficient+rights+to+use+this+command%0A%0A%0A%60%60%60%0A%0A%23%23+Metadata%0A%7Ckey%7Cvalue%7C%0A%7C--%7C--%7C%0A%7C**version**%7C0.17.1%7C%0A%7C**os**%7Clinux%7C%0A%7C**arch**%7Cx86_64%7C%0A
#+end_comment
