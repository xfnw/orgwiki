#+TITLE: openssl custom name constraints

adapted from [[https://serverfault.com/a/764699/973375][this ServerFault post]] and [[https://systemoverlord.com/2020/06/14/private-ca-with-x-509-name-constraints.html][this blogpost]].

* making your own name-constrained CA
#+begin_example sh
openssl req -new -x509 -days 3650 -newkey rsa:4096 \
-keyout my-ca.key -out my-ca.pem -subj '/C=US/O=Example/OU=CA' \
-addext "keyUsage = critical, keyCertSign, cRLSign" \
-addext "subjectKeyIdentifier = hash" \
-addext "basicConstraints = critical, CA:TRUE" \
-addext "nameConstraints = critical, permitted;DNS:.example.com"
#+end_example

#+begin_chat hi
you can use ~ed25519~ instead of ~rsa:4096~ if you want a nice and
smol cert, but that will be less compatible with stuff
#+end_chat

now you can start [[./openssl-signing.org][signing certs with it]]
