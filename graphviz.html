<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-01-06 Fri 16:44 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>graphviz</title>
<meta name="generator" content="Org Mode" />
<meta charset="UTF-8">
<style>
body {
font-family:monospace; font-size:12pt;
max-width: 700px; margin: 10px 20px;
}
@media only print {
body {
color:#000000; background-color:#ffffff;
}
}
@media only screen {
body {
color:#bfbfbf; background-color:#000000;
}
}
h1 { font-size:144%; }
h2,h3,h4,h5,h6 { font-size:120%; }
a {
text-decoration-style:solid;
}
@media only print {
a {
background-color:#ffffff;
color:#000000;
}
}
@media only screen {
a {
background-color:#112222;
color:#bfbfbf;
}
}
pre {
font-size:10.5pt;
max-width:80ch;
border: 1pt dotted #bfbfbf;
padding:1ch;
}
code {
border: 1pt dotted #bfbfbf;
padding: 0 0.15em;
}
@media only screen {
code {
background-color:#222211;
}
}
.example { white-space:pre-wrap; }
.src { white-space:pre-wrap; }
@media only screen {
.example { background-color:#222211; }
.src { background-color:#222211; }
}
blockquote {
border: 1pt solid #bfbfbf;
padding: 0 1ch;
}
@media only screen {
blockquote {
background-color: #111100;
}
}
.tag { float:right; }
.tag:before { content: "["; }
.tag:after { content: "]"; }
@media only screen {
.tag { background-color:#111100; }
.tag:before { background-color:#111100; }
.tag:after { background-color:#111100; }
}
.done { }
.done:before { content: "["; }
.done:after { content: "]"; }
@media only screen {
.done { background-color: #117711; }
}
.todo { }
.todo:before { content: "["; }
.todo:after { content: "]"; }
@media only screen {
.todo { background-color: #bb1111; }
}
@media only screen {
.DELAYED { background-color: #220077; }
.RERUN { background-color: #775511; }
}
.FIXME:before,.fixme:before { content: "[FIXME]Â "; float:left; }
@media only screen {
.FIXME,.fixme { background-color: #bb1111; }
}
.org-center { text-align:center; }
table { width:100%; border-collapse:collapse; }
table, th, td { vertical-align:top; }
img { max-width:100%;display:block;margin:auto;height:auto; }
.timestamp { }
@media only screen {
.timestamp { background-color: #221122; }
}
@media only screen {
:target { background-color: #222211; }
}
@media only print {
nav { display: none; }
}
.footpara { display: inline; }
</style>
<nav>
<a href="index.html">home</a> /
<a href="about.html">about</a> /
<a href="sitemap.html">sitemap</a> /
</nav>
</head>
<body>
<div id="content" class="content">
<h1 class="title">graphviz</h1>
<p>
graphviz is a cool renderer thing for diagrams
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org0000000">1. using it</a></li>
<li><a href="#org0000001">2. xfnw's opinionated recommendations</a>
<ul>
<li><a href="#org0000002">2.1. layout plugin</a></li>
</ul>
</li>
<li><a href="#org0000003">3. examples</a>
<ul>
<li><a href="#org0000004">3.1. irc LINKS graph</a></li>
</ul>
</li>
<li><a href="#org0000005">4. reference</a>
<ul>
<li><a href="#org0000006">4.1. digraph/graph</a></li>
<li><a href="#org0000007">4.2. setting default node shape</a></li>
<li><a href="#org0000008">4.3. make lines less bendy</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org0000000" class="outline-2">
<h2 id="org0000000"><span class="section-number-2">1.</span> using it</h2>
<div class="outline-text-2" id="text-1">
<p>
you can use it <a href="http://www.google.com/url?q=https://dreampuf.github.io/GraphvizOnline/&amp;sa=U&amp;ved=2ahUKEwiBhu2An4H8AhXTEFkFHREXByAQFnoECAoQAg&amp;usg=AOvVaw3_6nvfLOYJh713VB5c7nfo">online</a>, or, if you install it to your computer, the
command to run it will be the layout plugin you want to use, for
example <code>dot</code>
</p>
</div>
</div>

<div id="outline-container-org0000001" class="outline-2">
<h2 id="org0000001"><span class="section-number-2">2.</span> xfnw's opinionated recommendations</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org0000002" class="outline-3">
<h3 id="org0000002"><span class="section-number-3">2.1.</span> layout plugin</h3>
<div class="outline-text-3" id="text-2-1">
<p>
for directed graphs (ie flowcharts), use <code>dot</code>. for undirected graphs,
use <code>fdp</code>. all the other ones i have either not been able to output
anything meaningful, or layout the data worse than <code>dot</code> and <code>fdp</code> 
</p>
</div>
</div>
</div>

<div id="outline-container-org0000003" class="outline-2">
<h2 id="org0000003"><span class="section-number-2">3.</span> examples</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org0000004" class="outline-3">
<h3 id="org0000004"><span class="section-number-3">3.1.</span> irc LINKS graph</h3>
<div class="outline-text-3" id="text-3-1">
<p>
this awk script will take output of irc's <code>LINKS</code> command, and convert
it to an undirected graphviz graph. change <code>$5</code> and <code>$6</code> to where the
two server names are in your log format.
</p>

<p>
reversing the <code>LINKS</code> output with <code>tac(1)</code> before feeding it into awk
seems to make graphviz have a better layout.
</p>

<div class="fixme" id="org0000009">
<p>
this assumes the letters of servernames are unique! it will break, for
example, if you have both <code>me.ow.cat</code> and <code>meow.cat</code>
</p>

</div>

<div class="org-src-container">
<pre class="src src-awk">BEGIN {
	print "graph l {"
}
{
	from=$5;
	to=$6;
	gsub("[\\.-]","",from);
	gsub("[\\.-]","",to);
	print from " [label=\"" $5 "\"]; ";
	if (from != to) {
		print to " -- " from ";"
	}
}
END {
	print "}"
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0000005" class="outline-2">
<h2 id="org0000005"><span class="section-number-2">4.</span> reference</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org0000006" class="outline-3">
<h3 id="org0000006"><span class="section-number-3">4.1.</span> digraph/graph</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<code>graph</code> is for showing relations. it uses <code>--</code> to connect items.
</p>
<pre class="example" id="org0000009">
graph MyNiceGraph {
	kitty -- cat;
}
</pre>

<p>
<code>digraph</code> is for showing directed stuff, like flowcharts. it uses <code>-&gt;</code>
to connect items.
</p>
<pre class="example" id="org0000009">
digraph MyNiceDigraph {
	cat -&gt; meow;
	cat -&gt; hiss;
}
</pre>

<p>
the word after them is the id, which can be pretty much anything you
want. it is for differentiating which graph you want to render if you
have multiple in a file. you'll have to quote it if you want to use
weird characters.
</p>
</div>
</div>

<div id="outline-container-org0000007" class="outline-3">
<h3 id="org0000007"><span class="section-number-3">4.2.</span> setting default node shape</h3>
<div class="outline-text-3" id="text-4-2">
<p>
there is a special name called <code>node</code> that applies to all nodes by
default.
</p>

<pre class="example" id="org0000009">
digraph Rectangles {
	node [shape="box"];

	ovals [shape="ellipse"];
	rectangles -&gt; ovals [label="are much nicer than"];
}
</pre>
</div>
</div>

<div id="outline-container-org0000008" class="outline-3">
<h3 id="org0000008"><span class="section-number-3">4.3.</span> make lines less bendy</h3>
<div class="outline-text-3" id="text-4-3">
<p>
by default, relations are shown with a spline, which makes a smooth
curve when possible. you can set the <code>splines</code> option to change
this. the value <code>ortho</code> will force 90&deg; lines, but this often gives
horrible results with large gaps and overlaps for non-trivial
graphs. <code>polyline</code> uses a sequence of straight lines.
</p>

<pre class="example" id="org0000009">
digraph ItsPolyTime {
	splines=polyline;

	h:w -&gt; fox:e;
	fox:n -&gt; h:s;
}
</pre>

<p>
graphviz sadly does not have a "squared" lines option<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup>. however, this can be emulated by creating invisible nodes to
route lines where you want.
</p>

<p>
in this example, we also use <code>dir=back</code> backwards line and <code>rank=same</code>
trickery to make graphviz' ranking algorithm put nodes in the right
places.
</p>

<pre class="example" id="org0000009">
digraph TheLetterH {
	splines=polyline;

	hidden [label=""; color=white];
	hidden2 [label=""; color=white];

	{rank=same; h; fox}
	{rank=same; hidden; hidden2}

	fox -&gt; h;
	h -&gt; hidden2:n [arrowhead=none];
	hidden:n -&gt; hidden2:n [arrowhead=none];
	fox -&gt; hidden:n [dir=back];
}
</pre>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">why not?
seems like it would be easy to implement, just "ortho without the gaps
in the lines" would probably be fine, perhaps with some extra
padding</p></div></div>


</div>
</div></div>
</body>
</html>
